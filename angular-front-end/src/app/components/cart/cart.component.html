<!-- cart + summary -->
<section class="bg-light my-5">
  <div class="container">
    <div class="row">
      <!-- cart -->
      <div class="col-lg-9 justify-content-center">
        <div class="card border shadow-0">
          <div class="m-4">
            <h4 class="card-title mb-4">Your shopping cart</h4>
            <div class="row gy-3 mb-4" *ngFor="let item of cart.cartItems">
              <div class="col-lg-5 align-content-center">
                <div class="me-lg-5">
                  <div class="d-flex">
                    <img [src]="item.product.image" class="w-25" />
                    <div class="ms-3">
                      <a routerLink="/layout/product" [queryParams]="{id : item.product.id}" class="nav-link">{{ item.product.name }}</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-sm-6 col-6 d-flex flex-row flex-lg-column flex-xl-row text-nowrap">
                <div class="">
                  <input type="number" min="1" [max]="item.product.stock" class="form-control text-center me-3" [(ngModel)]="item.quantity" (ngModelChange)="onQuantityChange(item)">
                </div>
                <div class="mt-3 mt-lg-0 m-2">
                  <h4>{{ item.price }} MAD</h4>
                  <small class="text-muted text-nowrap">{{ item.product.price }} MAD/ per item</small>
                </div>
              </div>
              <div class="col-lg col-sm-6 d-flex justify-content-sm-center justify-content-md-start justify-content-lg-center justify-content-xl-end mb-2">
                <div class="float-md-end">
                  <a class="btn btn-outline-danger" (click)="deleteItem(item)">Remove</a>
                </div>
              </div>
            </div>

            <div class="border-top pt-4 mx-4 mb-4">
              <p><i class="bi bi-truck text-muted fa-lg"></i> Free Delivery within 1-2 weeks</p>
              <p class="text-muted">
                Enjoy the convenience of free delivery on all your orders! At our store, we believe in providing exceptional value and service to our customers.
              </p>
            </div>
          </div>
        </div>
      </div>
      <!-- cart -->
      <!-- summary -->
      <div class="col-lg-3">
        <div class="card mb-3 border shadow-0">
          <div class="card-body">
            <form>
              <div class="form-group">
                <label class="form-label">Have coupon?</label>
                <div class="input-group">
                  <input type="text" class="form-control border" name="" placeholder="Coupon code" />
                  <button class="btn btn-light border">Apply</button>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="card shadow-0 border">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <p class="mb-2">Total price:</p>
              <p class="mb-2">{{ totalPrice() }} MAD</p>
            </div>
            <div class="d-flex justify-content-between">
              <p class="mb-2">Discount:</p>
              <p class="mb-2 text-success">- 60.00 MAD</p>
            </div>
            <div class="d-flex justify-content-between">
              <p class="mb-2">TAX:</p>
              <p class="mb-2">14.00 MAD</p>
            </div>
            <hr />
            <div class="d-flex justify-content-between">
              <p class="mb-2">Total price:</p>
              <p class="mb-2 fw-bold">{{ totalPrice() - 60 + 14 }} MAD</p>
            </div>

            <div class="mt-3">
              <a class="btn btn-success w-100 shadow-0 mb-2" (click)="openModel()">Make Purchase</a>
              <a class="btn btn-light w-100 border mt-2" routerLink="/layout/home">Back to shop</a>
            </div>
          </div>
        </div>
      </div>
      <!-- summary -->
    </div>
  </div>
</section>
<!-- cart + summary -->

<!-- payment -->
<div class="modal" id="myModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title">Enter Payment Information</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="closeModel()"></button>
      </div>
      <!-- Modal Body -->
      <div class="modal-body">
        <!-- Payment Form -->
        <div class="form-group">
          <label for="cardNumber">Card Number <i class="bi bi-credit-card-fill"></i></label>
          <input type="text" class="form-control" id="cardNumber" name="cardNumber" [(ngModel)]="cardNumber" required>
        </div>
        <div class="form-group">
          <label for="expiryDate">Expiry Date <i class="bi bi-calendar3"></i></label>
          <input type="date" class="form-control" id="expiryDate" name="expiryDate" required>
        </div>
        <div class="form-group">
          <label for="cvv">CVV <i class="bi bi-lock-fill"></i></label>
          <input type="text" class="form-control" id="cvv" name="cvv" required>
        </div>
      </div>
      <!-- Modal Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" [disabled]="!cardNumber" (click)="pay()"><i class="bi bi-check2"></i> Submit Payment</button>
      </div>
    </div>
  </div>
</div>
